{"mappings":"AAEAA,KAAO,CACLC,KAAOC,SAASC,cAAc,SAC9BC,YAAcF,SAASC,cAAc,uBACrCE,UAAYH,SAASC,cAAc,sBACnCG,YAAcJ,SAASC,cAAc,yBAGvCH,KAAKC,KAAKM,iBAAiB,UAmC3B,SAAsBC,IAtBWC,EAuBd,KArBV,IAAIC,SAAQ,CAACC,EAASC,KAC3B,MAAMC,EAAgBC,KAAKC,SAAW,GAEhCC,EAAaC,aAAY,KACzBC,IAAYC,GAKZN,EACFF,IAEAC,IAGFM,GAAW,GAVTE,cAAcJ,EAUJ,GACXP,EAAM,KAMVY,MAAK,EAAGC,SAAAC,EAAUC,MAAAC,MACjBC,QAAQC,IAAI,uBAAqBJ,QAAiBE,MAAU,IAE7DG,OAAM,EAAGN,SAAAO,EAAUL,MAAAM,MAClBJ,QAAQC,IAAI,sBAAoBE,QAAeC,MAAU,IA5B7D,IAAiCrB,C,IARdT,KAAK+B,WAAWC,MACjBhC,KAAKK,UAAU2B,MADjC,MAGMb,EAASnB,KAAKM,YAAY0B,MAChC,IACId,EAAU","sources":["src/js/03-promises.js"],"sourcesContent":["import '../css/common.css';\n\nrefs = {\n  form : document.querySelector('.form'),\n  inputDdelay : document.querySelector('input[name=\"delay\"]'),\n  inputStep : document.querySelector('input[name=\"step\"]'), \n  inputAmount : document.querySelector('input[name=\"amount\"]'),\n};\n\nrefs.form.addEventlistener('submit', onFormSubmit);\n// refs.inputDdelay.addEventlistener('submit', onFormSubmit);\n// refs.inputStep.addEventlistener('submit', onFormSubmit);\n// refs.inputAmount.addEventlistener('submit', onFormSubmit);\n\nconst firstDelay = refs.inputDelay.value;\nconst delayStep = refs.inputStep.value;\nconst delay = firstDelay + delayStep;\nconst AMOUNT = refs.inputAmount.value;\nlet position = 0;\nlet counter = 0;\nlet intervalId = null;\n\nfunction createPromise(position, delay) {\n  \n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n\n    const intervalId = setInterval(() => {\n      if (counter === AMOUNT) {\n        clearInterval(intervalId);\n        return;\n      }\n\n      if (shouldResolve) {\n        resolve();// Fulfill\n      } else {\n        reject();// Reject\n      }\n      position += 1;\n      counter += 1;\n    }, delay);\n  });\n}\n\nfunction onFormSubmit(evt) {\n  createPromise(2, 1500)\n  .then(({ position, delay }) => {\n    console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n  })\n  .catch(({ position, delay }) => {\n    console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n  });\n}\n\n\n"],"names":["refs","form","document","querySelector","inputDdelay","inputStep","inputAmount","addEventlistener","evt","delay1","Promise","resolve","reject","shouldResolve","Math","random","intervalId1","setInterval","$47d4ff9957288465$var$counter","$47d4ff9957288465$var$AMOUNT","clearInterval","then","position","position2","delay","delay2","console","log","catch","position3","delay3","inputDelay","value"],"version":3,"file":"03-promises.89f2f596.js.map"}